"use strict";(self.webpackChunkng_film_blog=self.webpackChunkng_film_blog||[]).push([[606],{8606:(N,u,g)=>{g.r(u),g.d(u,{UserModule:()=>Y});var c=g(6814),a=g(9310),i=g(95),e=g(4946),l=g(9215),m=g(452);function C(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1,"L' Email est requis."),e.qZA())}function v(n,s){1&n&&(e.TgZ(0,"div",13),e._uU(1,"Email n'est pas valide"),e.qZA()),2&n&&e.Q6J("ngClass","error")}function h(n,s){if(1&n&&(e.YNc(0,C,2,0,"div",11),e.YNc(1,v,2,1,"div",12)),2&n){const t=e.oxw();e.Q6J("ngIf",t.controlLogin.email.errors&&t.controlLogin.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.controlLogin.email.errors&&t.controlLogin.email.errors.email)}}function M(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1,"Le mot de passe requis."),e.qZA())}function O(n,s){1&n&&(e.TgZ(0,"div",13),e._uU(1,"Le mot de passe n'est pas valide"),e.qZA()),2&n&&e.Q6J("ngClass","error")}function b(n,s){if(1&n&&(e.YNc(0,M,2,0,"div",11),e.YNc(1,O,2,1,"div",12)),2&n){const t=e.oxw();e.Q6J("ngIf",t.controlLogin.password.errors&&t.controlLogin.password.errors.required),e.xp6(1),e.Q6J("ngIf",t.controlLogin.password.errors&&t.controlLogin.password.errors.password)}}function P(n,s){if(1&n&&(e.TgZ(0,"div",14)(1,"p"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.errorMessage)}}const f=function(n){return{"is-invalid":n}},x=function(){return["/user/register"]};let _=(()=>{class n{constructor(t,r,o,d){this.fb=t,this.authService=r,this.storage=o,this.router=d,this.loginForm=this.fb.group({email:["",i.kI.required],password:["",i.kI.required]}),this.loginIsSuccess=null,this.errorMessage="",this.sucessMessage="",this.submitted=!1}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}get controlLogin(){return this.loginForm.controls}setDefaultValue(){this.loginForm.setValue({email:"",password:""})}ngOnInit(){}onSubmit(){this.submitted=!0,!this.loginForm.invalid&&this.authService.login(this.email.value,this.password.value).subscribe({next:t=>{t.jwt&&t.user?(this.storage.setToken(t.jwt),localStorage.setItem("user",JSON.stringify(t.user)),this.loginIsSuccess=!0,this.router.navigate(["/home"])):this.loginIsSuccess=!1},error:t=>{this.errorMessage=t.error.message,this.loginIsSuccess=!1}})}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(i.qu),e.Y36(l.e8),e.Y36(m.i),e.Y36(a.F0))};static#n=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:22,vars:12,consts:[[1,"login-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email","id","email","name","email","placeholder","Adresse Email",1,"form-control",3,"ngClass"],["class","alert alert-danger",3,"ngIf"],["for","password"],["type","password","formControlName","password","id","password","name","password","placeholder","Mot de passe",1,"form-control",3,"ngClass"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["type","submit",1,"btn","btn-primary"],[3,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"messages-failed"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2," Connexion"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Adresse Email"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,h,2,2,"ng-template",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",6),e._uU(11,"Mot de passe"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,b,2,2,"ng-template",5),e.qZA(),e.TgZ(14,"div")(15,"p"),e._uU(16," Vous n'avez pas encore de compte ? "),e.TgZ(17,"a",8),e._uU(18," Inscrivez-vous"),e.qZA()()(),e.TgZ(19,"button",9),e._uU(20,"Se connecter"),e.qZA()(),e.YNc(21,P,3,1,"ng-template",10),e.qZA()),2&r&&(e.xp6(3),e.Q6J("formGroup",o.loginForm),e.xp6(4),e.Q6J("ngClass",e.VKq(7,f,o.submitted&&o.controlLogin.email.errors||o.controlLogin.email.touched&&o.controlLogin.email.invalid)),e.xp6(1),e.Q6J("ngIf",o.controlLogin.email.touched&&o.controlLogin.email.invalid),e.xp6(4),e.Q6J("ngClass",e.VKq(9,f,o.submitted&&o.controlLogin.password.errors||o.controlLogin.password.touched&&o.controlLogin.password.invalid)),e.xp6(1),e.Q6J("ngIf",o.controlLogin.password.touched&&o.controlLogin.password.invalid),e.xp6(4),e.Q6J("routerLink",e.DdM(11,x)),e.xp6(4),e.Q6J("ngIf",o.submitted&&!o.loginIsSuccess&&o.errorMessage))},dependencies:[c.mk,c.O5,a.rH,a.Od,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:["div.login-container[_ngcontent-%COMP%]{background-color:#f2f2f2;border-radius:10px;padding:40px;box-shadow:0 0 5px #0000004d;width:500px;margin:70px auto}div.login-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-weight:500;color:#3a3ae0}div.login-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}div.login-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#3a3ae0;text-decoration:none}div.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}div.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}div.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box;transition:border-color .3s ease-in-out}div.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}div.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%]{border:1px solid #ff3030}div.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{background-color:#fadada;color:#a20e0e;padding:5px 10px;border-bottom-left-radius:5px;border-bottom-right-radius:5px}div.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;margin-top:20px;font-size:18px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}div.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}div.login-container[_ngcontent-%COMP%]   div.messages-success[_ngcontent-%COMP%]{background-color:#8cd88c;padding:10px 15px;border-radius:5px;margin-top:20px}div.login-container[_ngcontent-%COMP%]   div.messages-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin:0;padding:0}div.login-container[_ngcontent-%COMP%]   div.messages-failed[_ngcontent-%COMP%]{background-color:#fadada;color:#a20e0e;padding:10px 15px;border-radius:5px;margin-top:20px}div.login-container[_ngcontent-%COMP%]   div.messages-failed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin:0;padding:0}"]})}return n})(),w=(()=>{class n{constructor(t,r,o){this.route=t,this.userService=r,this.auth=o,this.userId=1}ngOnInit(){this.userId=this.auth.userDatasStored.id,this.userService.getById(this.userId).subscribe({next:t=>{this.userData=t},error:t=>{console.log(t)}})}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(a.gz),e.Y36(l.KD),e.Y36(l.e8))};static#n=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-profil"]],decls:9,vars:3,consts:[[1,"user-profile"],[1,"profile-picture"],["alt","User Profile",3,"src"],[1,"username"],[1,"user-detail"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"h2"),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"p"),e._uU(8),e.qZA()()()),2&r&&(e.xp6(2),e.s9C("src",o.userData.profilePicture,e.LSH),e.xp6(3),e.Oqu(o.userData.username.toUpperCase()),e.xp6(3),e.hij(" Email: ",o.userData.email,""))},styles:[".user-profile[_ngcontent-%COMP%]{margin-top:50px;display:flex;flex-direction:column;align-items:center;min-height:100vh;text-align:center}.profile-picture[_ngcontent-%COMP%]{width:180px;height:180px;border-radius:10px;overflow:hidden;margin-bottom:10px}.profile-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.username[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin:25px 0}.username[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.user-detail[_ngcontent-%COMP%]{background-color:#f3f3f3;border-radius:10px;width:-moz-fit-content;width:fit-content;padding:10px 30px;color:#4d4d4d}.user-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})}return n})();function Z(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1,"Le nom d'utilisateur est requis"),e.qZA())}function T(n,s){1&n&&(e.TgZ(0,"div",15),e._uU(1,"Le nom d'utilisateur n'est pas valide"),e.qZA()),2&n&&e.Q6J("ngClass","error")}function I(n,s){if(1&n&&(e.YNc(0,Z,2,0,"div",13),e.YNc(1,T,2,1,"div",14)),2&n){const t=e.oxw();e.Q6J("ngIf",t.controlRegister.username.errors&&t.controlRegister.username.errors.required),e.xp6(1),e.Q6J("ngIf",t.controlRegister.username.errors&&t.controlRegister.username.errors.username)}}function q(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1,"L' Email requis."),e.qZA())}function L(n,s){1&n&&(e.TgZ(0,"div",15),e._uU(1,"Email n'est pas valide"),e.qZA()),2&n&&e.Q6J("ngClass","error")}function U(n,s){if(1&n&&(e.YNc(0,q,2,0,"div",13),e.YNc(1,L,2,1,"div",14)),2&n){const t=e.oxw();e.Q6J("ngIf",t.controlRegister.email.errors&&t.controlRegister.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.controlRegister.email.errors&&t.controlRegister.email.errors.email)}}function R(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1,"Le Mot de passe requis."),e.qZA())}function J(n,s){1&n&&(e.TgZ(0,"div",15),e._uU(1,"Le mot de passe n'est pas valide"),e.qZA()),2&n&&e.Q6J("ngClass","error")}function A(n,s){if(1&n&&(e.YNc(0,R,2,0,"div",13),e.YNc(1,J,2,1,"div",14)),2&n){const t=e.oxw();e.Q6J("ngIf",t.controlRegister.password.errors&&t.controlRegister.password.errors.required),e.xp6(1),e.Q6J("ngIf",t.controlRegister.password.errors&&t.controlRegister.password.errors.password)}}function S(n,s){if(1&n&&(e.TgZ(0,"div",16)(1,"p"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.errorMessage)}}const p=function(n){return{"is-invalid":n}},k=function(){return["/user/login"]},Q=[{path:"",component:_},{path:"login",component:_},{path:"register",component:(()=>{class n{constructor(t,r,o,d){this.fb=t,this.authService=r,this.storage=o,this.router=d,this.registerForm=this.fb.group({username:["",i.kI.required],email:["",i.kI.required],password:["",i.kI.required]}),this.submitted=!1,this.signUpIsSuccessful=!1,this.errorMessage=""}get username(){return this.registerForm.get("username")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get controlRegister(){return this.registerForm.controls}ngOnInit(){}onSubmit(){this.submitted=!0,!this.registerForm.invalid&&this.authService.register(this.username.value,this.email.value,this.password.value).subscribe({next:t=>{t.jwt&&t.user?(this.storage.setToken(t.jwt),localStorage.setItem("user",JSON.stringify(t.user)),this.signUpIsSuccessful=!0,this.router.navigate(["/home"])):this.signUpIsSuccessful=!1},error:t=>{console.log(t),this.errorMessage=t.error.message,this.signUpIsSuccessful=!1}})}setDefaultValue(){this.registerForm.setValue({username:"",email:"",password:""})}onReset(){this.submitted=!1,this.registerForm.reset()}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(i.QS),e.Y36(l.e8),e.Y36(m.i),e.Y36(a.F0))};static#n=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],decls:27,vars:17,consts:[[1,"register-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],["type","text","formControlName","username","id","username","name","username","placeholder","Nom d'utilisateur",1,"form-control",3,"ngClass"],["class","alert alert-danger",3,"ngIf"],["for","email"],["type","email","formControlName","email","id","email","name","email","placeholder","Adresse e-mail",1,"form-control",3,"ngClass"],["for","password"],["type","password","formControlName","password","id","password","name","password","placeholder","Mot de passe",1,"form-control",3,"ngClass"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"messages-failed"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2," Inscription "),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nom d'utilisateur"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,I,2,2,"ng-template",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",6),e._uU(11,"Adresse e-mail"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,U,2,2,"ng-template",5),e.qZA(),e.TgZ(14,"div",2)(15,"label",8),e._uU(16,"Mot de passe"),e.qZA(),e._UZ(17,"input",9),e.YNc(18,A,2,2,"ng-template",5),e.qZA(),e.TgZ(19,"div")(20,"p"),e._uU(21,"Vous avez d\xe9j\xe0 un compte ? "),e.TgZ(22,"a",10),e._uU(23," Se connecter"),e.qZA()()(),e.TgZ(24,"button",11),e._uU(25,"Inscription"),e.qZA()(),e.YNc(26,S,3,1,"ng-template",12),e.qZA()),2&r&&(e.xp6(3),e.Q6J("formGroup",o.registerForm),e.xp6(4),e.Q6J("ngClass",e.VKq(10,p,o.submitted&&o.controlRegister.username.errors||o.controlRegister.username.touched&&o.controlRegister.username.invalid)),e.xp6(1),e.Q6J("ngIf",o.controlRegister.username.touched&&o.controlRegister.username.invalid),e.xp6(4),e.Q6J("ngClass",e.VKq(12,p,o.submitted&&o.controlRegister.email.errors||o.controlRegister.email.touched&&o.controlRegister.email.invalid)),e.xp6(1),e.Q6J("ngIf",o.controlRegister.email.touched&&o.controlRegister.email.invalid),e.xp6(4),e.Q6J("ngClass",e.VKq(14,p,o.submitted&&o.controlRegister.password.errors||o.controlRegister.password.touched&&o.controlRegister.password.invalid)),e.xp6(1),e.Q6J("ngIf",o.controlRegister.password.touched&&o.controlRegister.password.invalid),e.xp6(4),e.Q6J("routerLink",e.DdM(16,k)),e.xp6(2),e.Q6J("disabled",o.controlRegister.invalid),e.xp6(2),e.Q6J("ngIf",o.submitted&&!o.signUpIsSuccessful&&o.errorMessage))},dependencies:[c.mk,c.O5,a.rH,a.Od,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:["div.register-container[_ngcontent-%COMP%]{background-color:#f2f2f2;border-radius:10px;padding:40px;box-shadow:0 0 5px #0000004d;width:500px;margin:70px auto}div.register-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-weight:500;color:#3a3ae0}div.register-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}div.register-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#3a3ae0;text-decoration:none}div.register-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}div.register-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}div.register-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box;transition:border-color .3s ease-in-out}div.register-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}div.register-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%]{border:1px solid #ff3030}div.register-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{background-color:#fadada;color:#a20e0e;padding:5px 10px;border-bottom-left-radius:5px;border-bottom-right-radius:5px}div.register-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;margin-top:20px;font-size:18px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}div.register-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}div.register-container[_ngcontent-%COMP%]   div.messages-success[_ngcontent-%COMP%]{background-color:#8cd88c;padding:10px 15px;border-radius:5px;margin-top:20px}div.register-container[_ngcontent-%COMP%]   div.messages-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin:0;padding:0}div.register-container[_ngcontent-%COMP%]   div.messages-failed[_ngcontent-%COMP%]{background-color:#d04033;padding:10px 15px;border-radius:5px;margin-top:20px}div.register-container[_ngcontent-%COMP%]   div.messages-failed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin:0;padding:0}"]})}return n})()},{path:"profil",component:w,canActivate:[(n,s)=>!!(0,e.f3M)(l.id).isLoggedIn||(0,e.f3M)(a.F0).createUrlTree(["register"])]}];let y=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#n=this.\u0275mod=e.oAB({type:n});static#t=this.\u0275inj=e.cJS({imports:[c.ez,i.u5,i.UX,c.ez,i.u5,i.UX]})}return n})(),Y=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#n=this.\u0275mod=e.oAB({type:n});static#t=this.\u0275inj=e.cJS({imports:[c.ez,a.Bz.forChild(Q),y]})}return n})()}}]);